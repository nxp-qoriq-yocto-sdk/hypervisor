
-------------------------------------------------------
Topaz Hypervisor Release Notes

Topaz Version: 0.2
Revsion: 0.2-rc3
Date: 6/13/2008

-------------------------------------------------------
Contents

1. Introduction
2. Compatibility/Dependencies
3. Detailed List of Changes
4. Limitations

-------------------------------------------------------
1.  Introduction

   This document identifies changes between Topaz 
   releases and a list of limitations.

-------------------------------------------------------
2.  Compatibility/Dependencies

   -Topaz 0.2-rc3
      -is compatible with Simics 8578 3.2.27
      -requires device tree compiler (DTC) SHA tag
       fc9769ac2bae8a32d5d277007d22414c4516b02 with the 
       libfdt patch applied as described in the Topaz
       README.txt

-------------------------------------------------------
3.  Detailed List of Changes

   -Topaz 0.2-rc3
      -bug 1498 fixed
      -return invalid state rather than failed for start/stop hcalls. Fixes
       bugs 1522, 1523, 1524, 1526
      -don't set r3 in abort_guest_access unless an extable match is found.
      -gdb stub now has the ability to read some registers
       (registers with the value 0xdeadbeef are unimplemented)
      -the fsl,entry-cpu property is removed from the Topaz 0.78 spec 
       (resolves bugs 1495, 1496, 1497)

   -Topaz 0.2-rc2
      -removed CROSS_COMPILE from Makefiles
      -bug 1494 fixed - update fsl,hv-cpus property name
      -bug 1504 fixed - byte-channel TX interrupts hooked up to RX ints
      -bug 1500 fixed - set GESR[PIL] when reflecting illegal instruction
      -raise privileged instruction exception when guest user mode hcall is
       performed
      -unset GCPU_PEND_VIRQ when iacking a virq
      -cleaned up gdb stub is committed
      -build infrastructure for gdb stub

-------------------------------------------------------
4.  Limitations

 A. Open Bugs

 B. CPU Feature Limitations

   -MMU
      -invalid MMU mappings are permitted to be written into
       the TLB, and a machine check will occur on access to
       the mapping--  this is not implemented for TLB1.  Access
       to invalid TLB1 mappings will result in another TLB miss

   -physical addresses greater than 32 bits are not supported

   -HID0
      -the HID0 register is not implemented-- writes to it 
       are ignored

   -CPU core performance monitor support
      -support for the CPU performance monitor instructions,
       registers, and interrupts is not implemented

   -CPU core Debug support
      -CPU debug support is not implemented including all debug
       registers and interrupts
      -writes to debug SPRs are ignored

   -L1 cache control
      -the L1 cache control registers are not implemented
         L1CSR0
         L1CSR1
         L1CSR2

   -L2 cache control
      -the L2 cache control registers are not implemented
         L2CAPTDATAHI
         L2CAPTDATALO
         L2CAPTECC
         L2CSR0
         L2CSR1
         L2ERRADDR
         L2ERRATTR
         L2ERRCTL
         L2ERRDET
         L2ERRDIS
         L2ERREADDR
         L2ERRINJCTL
         L2ERRINJHI
         L2ERRINJLO
         L2ERRINTEN

   -Power management
      -support for the MSR[WE] power management bit is not
       implemented

   -"Guest debug mode" as defined by the Topaz spec is not
    implemented

   -"Guest cache lock mode" as defined by the Topaz spec is not
    implemented


 C. Platform Feature Limitations

   -Coherence subdomains
      -support for coherence subdomains is not implemented

   -L3 / Platform Cache configuration is not implemented

   -platform error interrupts
      -in the platform MPIC multiple error interrupts are multiplexed
       to interrupt 0.  De-multiplexing and routing of platform
       error interrupts to partitions is not implemented.

 D. Hypervisor Services Limitations

   -Partition Management
      -partition management interrupts (as specified in the
       Topaz spec) are not implemented:
         -partition state change 
         -watchdog expiration
         -restart request

   -Debug console
      -the hypervisor debug console is partially implemented
       and input is not supported

   -gdb stub
      -the gdb stub does not support the following:
         -writing registers
         -reading/writing memory
         -breakpoints
         -single step
      -the gdb stub does not support hardware breakpoints or
       hardware watchpoints (not planne

 E. ePAPR Related Notes

    -The v0.2-rc3 hypervisor does not comply with the ePAPR 
     ELF loading requirements with respect to the physical
     load address of the image.  The ET_EXEC and ET_DYN
     flags are ignored and the image is loaded at the specified
     address address (fsl,hv-load-image-table property or 
     partman utility)
