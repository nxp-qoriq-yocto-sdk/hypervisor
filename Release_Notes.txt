#
# Copyright (C) 2008-2010 Freescale Semiconductor, Inc.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
#
#  THIS SOFTWARE IS PROVIDED BY THE AUTHOR "AS IS" AND ANY EXPRESS OR
#  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
#  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN
#  NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
#  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
#  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#

-------------------------------------------------------
Freescale Hypervisor Release Notes

Topaz Version: 0.7
Revsion: 010
Date: 9/10/2010

This document identifies changes between Embedded
Hypervisor releases.

Detailed List of Changes

   -v0.7-011 bug fixes and changes
       -bug 6339: partition start failure. Patch syncs icache
        when uncompressing an image.

   -v0.7-010 bug fixes and changes
       -bug 6277: fix reconfig of 36-bit guest physical
        addresses
       -bug 6278: Error interrupts can be unmasked by standby
        partitions, possibly causing hv assert
       -partman: update errors to use ePAPR error codes
       -failover unit test: Fix wrong error message
       -return an error on a missing dma-window.
       -get messages out directly to serial on panic

   -v0.7-009 bug fixes and changes
       -bug 6214: MSIs not working on hv-1p scenario
       -bug 6235: tlbilx can result in unnecessary invalidate all

   -v0.7-008 bug fixes and changes
       -bug 6052: use same liodn offset for all Qman portals within
        a partition
       -bug 6096: allow guests to partition L2 cache
       -bug 5975: failure in cache-A unit test
       -Fix build with make 3.82

   -v0.7-007 bug fixes and changes
       -bug 6049: recursive machine check in HV during Linux boot
       -bug 5968: NAP-related performance issues on networking tests
       -bug 6051: perf tools not working under HV
       -fixed issue where a liodn was deleted, but still use in
        DMA setup, resulting in a pamu_config_liodn error
       -rev'ed the ePAPR vendor ID for hcalls to 1 to sync with spec,
        but still to continue to support 0 for backwards compatibility
       -64-bit HV: honor MSR[CM] when emulating instructions
       -paact command fixes and output cleanup
       -ePAPR hcall vendor ID is now 1, not zero
       -MSI fixes
       -watchdog unit test fixes
       -cleanup

   -v0.7-006 bug fixes and changes
       -bug 5840: DMA window RPN reconfigure on device claim
       -PCIE virtualization support is removed-- PCIE is only
        supported in configurations where guest-phys == true-phys
       -unit test cleanup
       -support for customizable system_health_check function
       -bug fix to paact command display for spaace entries
       -partman recognizes the paused,pausing,resuming states
       -bug 5924: make error interrupt logs less verbose
       -fix wrc action for hypervisor watchdog to reset board
       -bug 5734: set root node compatible by appending "-hv"
       -bug 5827: doorbells get created with no interrupt controller
        parent

   -v0.7-005 bug fixes and changes
       -DMA is now disabled by default, to be enabled with
        an hcall when the driver is ready (especially important
        after a partition reset).  For compatibility, a partition
        can specify no-dma-disable and get the old behavior.
        no-dma-disable can also be specified on a specific
        device when it targets shared memory.  defer-dma-disable
        can be specified on a partition, in which case when
        a partition is stopped, DMA is not disabled until a manager
        issues the new FH_PARTITION_STOP_DMA hcall.
       -added support for resetting hv if all partitions become stopped
       -hv watchdog support, and misc timer fixes/cleanup
       -added zero-pma property, allowing shared memory regions to
        be set to a known state on hv boot
       -added load parameter to partition start hcall, matching
        the shell's "start load" command
       -timebase now runs while napping, keeping the clocks
        in sync
       -partman no longer needs to malloc the entire BSS for the
        file it's loading
       -expose get_vcpu_state() for debug stub API
       -fix race in claim hcall if there are multiple partitions
        trying to claim at once
       -don't let guests set DBCR0[EDM]
       -improve robustness with certain classes of partition
        config errors
       -unit test updates
       -updated for sim.git changes

   -v0.7-004 bug fixes and changes
       -guest watchdog is not emulated with the FIT
       -guest debug mode is enabled by default
       -support for PCI when guest phys != true phys
        is removed
       -guest error queues is represented with node
        in guest device tree
       -migrate access violations in guest error queue
        on a device claim
       -support for claim of error manager
       -error manger is represented with a node in
        guest device trees
       -err_get_info hcall now takes a handle to the guest
        error queue or error manager as argument
       -64-bit cleanup in fast TLB path
       -error management support for PAMU operation errors
        and PAMU ECC errors
       -error management support for internal SRAM errors
       -display upper nibble for 36-bit addresses on paact
        command
       -error management support for DDR controller errors
       -add support to reset system if all partitions stop
       -bug 5589-- set guest dev tree path in error info on
        access violations

   -v0.7-003 bug fixes and changes
       -updated vendor ID for hcalls

   -v0.7-002 bug fixes and changes
       -hcalls have been updated to be ePAPR compliant
       -guest device tree compatibles have been updated to
        be ePAPR compliant-- byte-channels, doorbells,
        vmpic
       -device claim feature is implemented
       -CPC error handling is implemented
       -64-bit cleanup sufficient to run a test 32-bit
        guest

   -v0.7-001 bug fixes and changes (since 0.6-004)
       -cleanup for 64-bit support
       -enable perfmon interrupt reflection
       -nap updates to handle race conditions
       -added shell command to dump config tree
       -improve ability to get output to console on a
        crash
       -flush L1/L2 caches on a vcpu stop
       -added CCM error interrupt handler
       -pre-work for hypervisor watchdog-- virtualize the
        FIT
       -make decrementer interrupt level triggered
       -gcov-extract support-- infrastructure to let
        an external tool extract gcov data
       -bug 4167- do_inflate in uimage loading does not
        return error codes
       -show valid bit in paact command in shell
       -give message if no entries in paact are found
       -get CPC config information from hardware device tree
       -enable guest cache locking by default
       -bug 4471- handle unexpected command line arguments in 
        partman
