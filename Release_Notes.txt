
-------------------------------------------------------
Topaz Hypervisor Release Notes

Topaz Version: 0.3
Revsion: 0.3-rc1
Date: 9/26/2008

-------------------------------------------------------
Contents

1. Introduction
2. Compatibility/Dependencies
3. Detailed List of Changes
4. Limitations

-------------------------------------------------------
1.  Introduction

   This document identifies changes between Topaz 
   releases and a list of limitations.

-------------------------------------------------------
2.  Compatibility/Dependencies

   -Topaz 0.3-rc1
      -is compatible with Simics P4080 4.0.18 / 4.0.pre3
       and later
      -requires version 1.2.0-rc1 or newer of the
       device tree compiler (DTC).
      -requires libos tag v0.3-rc1

-------------------------------------------------------
3.  Detailed List of Changes

   -Topaz 0.3-rc1 bug fixes and changes from 0.2
      -guest cache lock mode is now supported as per
      the Topaz spec
      -TLB cache-- TLB0 and TLB1 are both fully virtualized
       (CONFIG_TLB_CACHE)
      -master and guest device printing support at the
       HV console
      -guest machine check cleanup and unit test
      -initial guest debug mode support-- trap instruction
       debug trap is implemented

-------------------------------------------------------
4.  Limitations

 A. Open Bugs

 B. CPU Feature Limitations

   -MMU
      -If the guest-to-real address mapping is sufficiently
       misaligned, TLB1 entries can be depleted, causing
       a hypervisor panic.

   -physical addresses greater than 32 bits are not supported

   -CPU core performance monitor support
      -support for the CPU performance interrupt is not implemented

   -CPU core Debug support
      -IAC,DAC,IRPT support is not present

   -Cache control
      -the following cache control registers are not implemented
         L1CSR2
         L2CAPTDATAHI
         L2CAPTDATALO
         L2CAPTECC
         L2CSR0
         L2CSR1
         L2ERRADDR
         L2ERRATTR
         L2ERRCTL
         L2ERRDET
         L2ERRDIS
         L2ERREADDR
         L2ERRINJCTL
         L2ERRINJHI
         L2ERRINJLO
         L2ERRINTEN

   -Power management
      -support for the MSR[WE] power management bit is not
       implemented

 C. p4080 Platform Features

   -Coherence subdomains
      -Support for coherence subdomains is not implemented.  All
       memory is globally coherent.

   -L3 / Platform Cache configuration is not implemented

   -platform error interrupts
      -In the platform MPIC multiple error interrupts are multiplexed
       to interrupt 0.  De-multiplexing and routing of platform
       error interrupts to partitions is not implemented.

 D. Configuration
   -the hypervisor must be loaded and run from physical address 0x0

 E. Hypervisor Services

   -Partition Management
      -Partition management interrupts (as specified in the
       Topaz spec) are not implemented:
         -partition state change 
         -watchdog expiration
         -restart request

   -Debug console
      -the hypervisor debug console is partially implemented
       and input is not supported

   -gdb stub
      -the gdb stub does not support hardware breakpoints or
       hardware watchpoints 
      -the stub is limited to debugging the boot core in 
       each partition.  SMP debugging is not supported.

 F. ePAPR Related Notes

    -The hypervisor does not currently comply with the ePAPR 
     ELF loading requirements with respect to the physical
     load address of the image.  The ET_EXEC and ET_DYN
     flags are ignored and guest images is loaded at the specified
     address address (fsl,hv-load-image-table property or 
     partman utility)
