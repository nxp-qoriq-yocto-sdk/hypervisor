#
# Copyright (C) 2008,2009 Freescale Semiconductor, Inc.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
#
#  THIS SOFTWARE IS PROVIDED BY THE AUTHOR "AS IS" AND ANY EXPRESS OR
#  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
#  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN
#  NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
#  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
#  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#

-------------------------------------------------------
Topaz Hypervisor Release Notes

Topaz Version: 0.4
Revsion: 008
Date: 7/10/2009

-------------------------------------------------------
Contents

1. Introduction
2. Compatibility/Dependencies
3. Detailed List of Changes
4. Limitations

-------------------------------------------------------
1.  Introduction

   This document identifies changes between Topaz 
   releases and a list of limitations.

-------------------------------------------------------
2.  Compatibility/Dependencies

   -Topaz 0.4-008 has been tested with Simics 4.2.8 / pre7.
    It is *not* compatible with simics 4.0, at least without
    changing which simics script the test cases invoke.

   -in sync with Embedded Hypervisor Architecture specifciation
    0.876

   -Topaz no longer hardcodes the tlbilx opcode, so now you must
    be running an up-to-date toolchain.

-------------------------------------------------------
3.  Detailed List of Changes

   -Topaz 0.4-008 bug fixes and changes
      -bug 3650: Always use interrupt-safe locks 
      -bug 3592: shell tlbread command 64-bit cleanup
      -misc unit test cleanup

   -Topaz 0.4-007 bug fixes and changes
      -removed hardcoded tlbilx opcode; updated toolchain now required
      -fixed MCSR[MCP] behavior
      -now properly obeys missing map-ranges on directly assigned devices
      -test cases converted to simics 4.2
      -partman now accepts ELF segments that end at the address space
       top.
      -tests now have a consolebuf that can be dumped if something goes
       wrong
      -new PAMU access violation error queue component of DMA test
      -various minor fixes

   -Topaz 0.4-006 bug fixes and changes
      -added support for system reset hcall
      -support data breakpoints in gdb stub
      -added error logging support
      -added support for fast doorbells
      -support reset status properties

   -Topaz 0.4-005 bug fixes and changes
      -MSIs are supported
      -support for modifiying guest device trees from
       partman is in place (e.g. /chosen node)
      -gdb stub support reset and image loading

   -Topaz 0.4-004 bug fixes and changes
      -new partman command syntax is now used
      -EOI with no hcall support is implemented
      -cache flushing is implemented

   -Topaz 0.4-003 bug fixes and changes
      -bug 3527-- sim.git hv-1p scenario is not working
        w/ 36-bit physical
      -preliminary support for routing PAMU access
       violation
      -flexible IMA definition allowed (bug 3509)
      -TLB read API for debug stubs
      -migration of all unit tests to assume 36-bit
       physical address map

   -Topaz 0.4-002 bug fixes and changes
      -36-bit physical addresses are supported
      -compressed uImages are supported
      -read-only GPMAs are supported
      -support node-update-phandle referencing hypervisor
       generated nodes
      -support for fh_nmi_send hcall
      -64-bit cleanup
      -support device-ranges
      -bug 3371: gdb stub is not 64-bit clean

-------------------------------------------------------
4.  Limitations

 A. Open Bugs

 B. CPU Feature Limitations

   -CPU core performance monitor support
      -support for the CPU performance interrupt is not implemented

   -Power management
      -support for the MSR[WE] power management bit is not
       implemented

 C. p4080 Platform Features

   -platform error interrupts
      -In the platform MPIC multiple error interrupts are multiplexed
       to interrupt 0.  De-multiplexing and routing of platform
       error interrupts to partitions is not implemented.

 D. Hypervisor Services

   -gdb stub
      -the gdb stub does not support hardware watchpoints 

 E. ePAPR Related Notes

    -The hypervisor only supports ET_EXC as per the
     ePAPR.  The ET_DYN flag is not supported. 
