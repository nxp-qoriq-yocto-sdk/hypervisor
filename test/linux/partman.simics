#
# Script to run 8578/u-boot/ultravisor/linux on simulator
#

# UART0 is the hypervisor
# UART1 is byte-channel UART MUX
# UART2 is Linux partition 1
# UART3 is Linux partition 2
$use_uart1 = 1
$use_uart2 = 1

$guest_image[0]  = "vmlinux"
$guest_addr[0]   = 0x00100000
$guest_image[1]  = "rootfs-partman.ext2.gz"
$guest_addr[1]   = 0x00800000

$kernel_image  = "hv.uImage"

$dev_tree_blob  = "hv-partman.dtb"

add-directory "%script%" -prepend
add-directory "%script%/../sim" -prepend
add-directory "%script%/../sim/images" -prepend
add-directory "../bin" -prepend
add-directory "bin" -prepend
add-directory "bin/linux" -prepend

run-command-file "boot.simics"
