#
# Script to run 8578/u-boot/ultravisor/linux on simulator
#

# UART0 is the hypervisor
# UART1 is byte-channel UART MUX
# UART2 is Linux partition 1
# UART3 is Linux partition 2
$use_uart1 = 1
$use_uart3 = 0

$guest_image[0]  = "vmlinux"
$guest_addr[0]   = 0xe8100000
$guest_image[1]  = "rootfs.ext2.gz"
$guest_addr[1]   = 0xe8600000
$guest_image[2]  = "vmlinux"
$guest_addr[2]   = 0xe8800000
$guest_image[3]  = "rootfs.ext2.gz"
$guest_addr[3]   = 0xe8d00000

$kernel_image  = "uv.uImage"

$dtb_image  = "hv-linux-2p.dtb"

add-directory "%script%/../common" -prepend
add-directory "%script%/../../bin" -prepend
add-directory "%script%/bin" -prepend
add-directory "%script%" -prepend

run-command-file "hvsim.include"                                                                 

@i=SIM_get_port_interface(conf.pamu0, 'signal', 'bypass')
@i.signal_lower(conf.pamu0)

@i=SIM_get_port_interface(conf.pamu1, 'signal', 'bypass')
@i.signal_lower(conf.pamu1)

@i=SIM_get_port_interface(conf.pamu2, 'signal', 'bypass')
@i.signal_lower(conf.pamu2)

@i=SIM_get_port_interface(conf.pamu3, 'signal', 'bypass')
@i.signal_lower(conf.pamu3)

@i=SIM_get_port_interface(conf.pamu4, 'signal', 'bypass')
@i.signal_lower(conf.pamu4)
